package com.magiology.render.tilerender.hologram;

import net.minecraft.client.model.PositionTextureVertex;
import net.minecraft.client.model.TexturedQuad;
import net.minecraft.client.renderer.tileentity.TileEntitySpecialRenderer;
import net.minecraft.tileentity.TileEntity;

import org.lwjgl.opengl.GL11;

import com.magiology.mcobjects.tileentityes.hologram.RenderObject;
import com.magiology.mcobjects.tileentityes.hologram.TileEntityHologramProjector;
import com.magiology.modedmcstuff.ColorF;
import com.magiology.objhelper.helpers.Helper;
import com.magiology.objhelper.helpers.renderers.GL11H;

public class RenderHologramProjector extends TileEntitySpecialRenderer{
	
	private TileEntityHologramProjector tile;
	
	@Override
	public void renderTileEntityAt(TileEntity t, double x, double y, double z, float partialTicks,int pass){
		tile=(TileEntityHologramProjector)t;
		GL11.glPushMatrix();
		GL11.glTranslated(x,y,z);
		GL11H.texture(false);
		GL11H.lighting(true);
//		TessHelper.drawCube(t.getBlockType().getBlockBoundsMinX(),t.getBlockType().getBlockBoundsMinY(),t.getBlockType().getBlockBoundsMinZ(),t.getBlockType().getBlockBoundsMaxX(),t.getBlockType().getBlockBoundsMaxY(),t.getBlockType().getBlockBoundsMaxZ());
//		new ModelBox(new ModelRenderer(new ModelBase() {}), 0, 0, 0, 0, 0, 1, 1, 1, 1).render(Get.Render.WR(), 1);
		new TexturedQuad(new PositionTextureVertex[]{
				new PositionTextureVertex(0, 0, 0, 0, 0),
				new PositionTextureVertex(1, 0, 0, 0, 0),
				new PositionTextureVertex(1, 1, 0, 0, 0),
				new PositionTextureVertex(0, 1, 0, 0, 0)
				}).draw(Get.Render.WR(), 1);
		GL11H.SetUpOpaqueRendering(1);
		GL11H.scaled(0.99999);
		ColorF color=new ColorF(Helper.fluctuatorSmooth(10, 0)*0.2+tile.mainColor.x,Helper.fluctuatorSmooth(35, 0)*0.2+tile.mainColor.y,Helper.fluctuatorSmooth(16, 0)*0.2+tile.mainColor.z,0.2);
		color.bind();
		GL11.glTranslatef(tile.offset.x, tile.offset.y-Helper.p*1.45F, 0.5F);
		tile.main.draw();
		GL11.glTranslatef(tile.size.x, tile.size.y, 0);
		
		for(RenderObject ro:tile.renderObjects){
			if(ro.host==null)ro.host=tile;
			GL11.glPushMatrix();
			GL11.glTranslatef(ro.offset.x, ro.offset.y, 0);
			ro.render(color);
			GL11.glPopMatrix();
		}
		GL11H.culFace(true);
		
		GL11H.EndOpaqueRendering();
		GL11H.texture(true);
		GL11.glPopMatrix();
	}
	
}
